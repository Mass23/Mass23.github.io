<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Three.js Sphere with Text and Image Fade</title>
    <style>
        body { margin: 0; overflow: hidden; }
        canvas { display: block; }
    </style>
</head>
<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        // Scene setup
        const scene = new THREE.Scene();

        // Camera setup
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.z = 0;  // Start inside the sphere

        // Renderer setup
        const renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        // Load texture for the inside of the sphere
        const textureLoader = new THREE.TextureLoader();
        const sphereTexture = textureLoader.load('images/me.webp');  // Your image path

        // Create sphere geometry
        const geometry = new THREE.SphereGeometry(10, 32, 32);  // Large sphere around the camera
        const material = new THREE.MeshBasicMaterial({
            map: sphereTexture,
            side: THREE.BackSide  // Render the inside of the sphere
        });
        const sphere = new THREE.Mesh(geometry, material);
        scene.add(sphere);

        // Text sprite creation
        function createTextSprite(text) {
            const canvas = document.createElement('canvas');
            const context = canvas.getContext('2d');
            context.font = 'Bold 48px Arial';
            context.fillStyle = 'white';
            context.fillText(text, 0, 50);

            const texture = new THREE.CanvasTexture(canvas);
            const spriteMaterial = new THREE.SpriteMaterial({ map: texture });
            const sprite = new THREE.Sprite(spriteMaterial);
            sprite.scale.set(2, 1, 1);  // Adjust the size
            sprite.position.set(0, 0, -5);  // Position it inside the sphere

            return sprite;
        }

        // Add "Hello World" text to the scene
        const helloText = createTextSprite('HELLO WORLD');
        scene.add(helloText);

        // Fade out effect for text
        function fadeOutText(textSprite) {
            let opacity = 1.0;
            const fadeInterval = setInterval(() => {
                opacity -= 0.01;
                textSprite.material.opacity = opacity;
                if (opacity <= 0) {
                    clearInterval(fadeInterval);
                    scene.remove(textSprite);
                }
            }, 50);
        }

        // Create an image sprite inside the sphere
        function createImageSprite(imageUrl) {
            const imgTexture = textureLoader.load(imageUrl);
            const spriteMaterial = new THREE.SpriteMaterial({ map: imgTexture });
            const sprite = new THREE.Sprite(spriteMaterial);
            sprite.scale.set(3, 3, 1);  // Adjust size of the image sprite
            // Position it randomly inside the sphere
            const radius = 8;
            const phi = Math.random() * Math.PI * 2;
            const theta = Math.random() * Math.PI;
            sprite.position.set(
                radius * Math.sin(theta) * Math.cos(phi),
                radius * Math.sin(theta) * Math.sin(phi),
                radius * Math.cos(theta)
            );
            scene.add(sprite);
            return sprite;
        }

        // Fade out effect for images
        function fadeOutImage(sprite) {
            let opacity = 1.0;
            const fadeInterval = setInterval(() => {
                opacity -= 0.01;
                sprite.material.opacity = opacity;
                if (opacity <= 0) {
                    clearInterval(fadeInterval);
                    scene.remove(sprite);
                }
            }, 50);
        }

        // Show random image periodically
        setInterval(() => {
            const imageSprite = createImageSprite('images/me.webp');
            setTimeout(() => fadeOutImage(imageSprite), 3000);  // Fade out after 3 seconds
        }, 6000);  // Show a new image every 6 seconds

        // Initial fade out of the "Hello World" text
        setTimeout(() => fadeOutText(helloText), 4000);  // Fade out after 4 seconds

        // Handle mouse movement for rotating the camera
        let mouseX = 0, mouseY = 0;
        document.addEventListener('mousemove', (event) => {
            mouseX = (event.clientX / window.innerWidth) * 2 - 1;
            mouseY = (event.clientY / window.innerHeight) * 2 - 1;
        });

        // Render loop
        function render() {
            // Rotate camera based on mouse position
            camera.rotation.y = mouseX * Math.PI;
            camera.rotation.x = mouseY * Math.PI * 0.5;

            // Render the scene
            renderer.render(scene, camera);

            requestAnimationFrame(render);
        }

        // Start rendering
        render();

        // Handle window resize
        window.addEventListener('resize', () => {
            renderer.setSize(window.innerWidth, window.innerHeight);
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
        });
    </script>
</body>
</html>
