<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rotating Cube with Iframes</title>
    <style>
        body { margin: 0; overflow: hidden; }
    </style>
</head>
<body>

<script src="https://cdn.jsdelivr.net/npm/three@0.151.3/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.151.3/examples/js/renderers/CSS3DRenderer.js"></script>

<script>
    // Scene setup
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    camera.position.z = 5;

    // Renderer for WebGL (background cube color)
    const renderer = new THREE.WebGLRenderer();
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    // CSS3D Renderer for the iframes
    const cssRenderer = new THREE.CSS3DRenderer();
    cssRenderer.setSize(window.innerWidth, window.innerHeight);
    cssRenderer.domElement.style.position = 'absolute';
    cssRenderer.domElement.style.top = 0;
    document.body.appendChild(cssRenderer.domElement);

    // Cube geometry for WebGL cube (background color)
    const geometry = new THREE.BoxGeometry(3, 3, 3);
    const material = new THREE.MeshBasicMaterial({ color: 0x222222, wireframe: true });
    const cube = new THREE.Mesh(geometry, material);
    scene.add(cube);

    // Iframe URLs with autoplay enabled
    const videoURL1 = "https://www.youtube.com/embed/NwCyP3h2nyA?autoplay=1&mute=1";
    const videoURL2 = "https://www.youtube.com/embed/NwCyP3h2nyA?autoplay=1&mute=1";

    // Create CSS3D Objects for iframes
    const createIframe = (url) => {
        const element = document.createElement("iframe");
        element.src = url;
        element.width = "560";
        element.height = "315";
        element.frameBorder = "0";
        element.allow = "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share";
        element.allowFullscreen = true;
        return new THREE.CSS3DObject(element);
    };

    // Position the iframes on two opposite sides of the cube
    const iframe1 = createIframe(videoURL1);
    iframe1.position.set(-1.5, 0, 0);  // Adjust to fit one side
    iframe1.rotation.y = Math.PI / 2; // Rotate to face out
    scene.add(iframe1);

    const iframe2 = createIframe(videoURL2);
    iframe2.position.set(1.5, 0, 0);  // Opposite side of iframe1
    iframe2.rotation.y = -Math.PI / 2; // Rotate to face out
    scene.add(iframe2);

    // Animation loop
    function animate() {
        requestAnimationFrame(animate);

        // Rotate the cube and the iframes
        cube.rotation.y += 0.01;
        iframe1.rotation.y += 0.01;
        iframe2.rotation.y += 0.01;

        renderer.render(scene, camera);
        cssRenderer.render(scene, camera);
    }

    animate();

    // Handle window resizing
    window.addEventListener("resize", () => {
        renderer.setSize(window.innerWidth, window.innerHeight);
        cssRenderer.setSize(window.innerWidth, window.innerHeight);
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
    });
</script>

</body>
</html>
